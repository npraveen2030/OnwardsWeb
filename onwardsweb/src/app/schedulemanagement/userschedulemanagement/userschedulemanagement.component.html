<div style="width: 90%; margin: auto">
  <p-table
    [value]="userschedules"
    [paginator]="true"
    [rows]="10"
    [rowsPerPageOptions]="[5, 10, 20]"
    [responsiveLayout]="'scroll'"
    [showCurrentPageReport]="true"
    class="p-datatable-striped bg-light"
  >
    <ng-template pTemplate="header">
      <tr>
        <th class="text-center">Date</th>
        <th class="text-center">9–10 AM</th>
        <th class="text-center">10–11 AM</th>
        <th class="text-center">11–12 AM</th>
        <th class="text-center">2–3 PM</th>
        <th class="text-center">3–4 PM</th>
        <th class="text-center">4–5 PM</th>
        <th class="text-center">5–6 PM</th>
        <th class="text-center">6–7 PM</th>
        <th class="text-center">7–8 PM</th>
        <th class="text-center">8–9 PM</th>
        <th class="text-center">9–10 PM</th>
        <th class="text-center">10–11 PM</th>
        <th class="text-center">11–12 PM</th>
      </tr>
    </ng-template>

    <ng-template pTemplate="body" let-schedule let-i="rowIndex">
      <tr [ngClass]="schedule.info ? 'no-stripe' : 'striped-row'">
        <td
          class="text-center {{ schedule.info ? 'bg-secondary-light' : '' }}"
          [attr.rowspan]="schedule.info ? 1 : 2"
        >
          {{ schedule.date | date : 'dd-MM-yyyy' }}
        </td>

        <td *ngIf="schedule.info" colspan="13" class="text-center bg-secondary-light text-dark">
          {{ schedule.info }}
        </td>

        <ng-container *ngIf="!schedule.info">
          <!-- Checkbox Row (Checked if value not null) -->
          <td class="text-center no-border-bottom">
            <input
              type="checkbox"
              class="form-check-input border border-dark"
              [checked]="schedule.h9to10 !== null"
              (change)="onSlotChange(schedule, 'h9to10', $event)"
            />
          </td>

          <td class="text-center no-border-bottom">
            <input
              type="checkbox"
              class="form-check-input border border-dark"
              [checked]="schedule.h10to11 !== null"
              (change)="onSlotChange(schedule, 'h10to11', $event)"
            />
          </td>

          <td class="text-center no-border-bottom">
            <input
              type="checkbox"
              class="form-check-input border border-dark"
              [checked]="schedule.h11to12 !== null"
              (change)="onSlotChange(schedule, 'h11to12', $event)"
            />
          </td>

          <td class="text-center no-border-bottom">
            <input
              type="checkbox"
              class="form-check-input border border-dark"
              [checked]="schedule.h2to3 !== null"
              (change)="onSlotChange(schedule, 'h2to3', $event)"
            />
          </td>

          <td class="text-center no-border-bottom">
            <input
              type="checkbox"
              class="form-check-input border border-dark"
              [checked]="schedule.h3to4 !== null"
              (change)="onSlotChange(schedule, 'h3to4', $event)"
            />
          </td>

          <td class="text-center no-border-bottom">
            <input
              type="checkbox"
              class="form-check-input border border-dark"
              [checked]="schedule.h4to5 !== null"
              (change)="onSlotChange(schedule, 'h4to5', $event)"
            />
          </td>

          <td class="text-center no-border-bottom">
            <input
              type="checkbox"
              class="form-check-input border border-dark"
              [checked]="schedule.h5to6 !== null"
              (change)="onSlotChange(schedule, 'h5to6', $event)"
            />
          </td>

          <td class="text-center no-border-bottom">
            <input
              type="checkbox"
              class="form-check-input border border-dark"
              [checked]="schedule.h6to7 !== null"
              (change)="onSlotChange(schedule, 'h6to7', $event)"
            />
          </td>

          <td class="text-center no-border-bottom">
            <input
              type="checkbox"
              class="form-check-input border border-dark"
              [checked]="schedule.h7to8 !== null"
              (change)="onSlotChange(schedule, 'h7to8', $event)"
            />
          </td>

          <td class="text-center no-border-bottom">
            <input
              type="checkbox"
              class="form-check-input border border-dark"
              [checked]="schedule.h8to9 !== null"
              (change)="onSlotChange(schedule, 'h8to9', $event)"
            />
          </td>

          <td class="text-center no-border-bottom">
            <input
              type="checkbox"
              class="form-check-input border border-dark"
              [checked]="schedule.h9to10pm !== null"
              (change)="onSlotChange(schedule, 'h9to10pm', $event)"
            />
          </td>

          <td class="text-center no-border-bottom">
            <input
              type="checkbox"
              class="form-check-input border border-dark"
              [checked]="schedule.h10to11pm !== null"
              (change)="onSlotChange(schedule, 'h10to11pm', $event)"
            />
          </td>

          <td class="text-center no-border-bottom">
            <input
              type="checkbox"
              class="form-check-input border border-dark"
              [checked]="schedule.h11to12pm !== null"
              (change)="onSlotChange(schedule, 'h11to12pm', $event)"
            />
          </td>
        </ng-container>
      </tr>

      <!-- Dot Row -->
      <tr *ngIf="!schedule.info" [ngClass]="i % 2 === 0 ? 'striped-row' : ''">
        <td class="text-center no-border-top"><span class="dot"></span></td>
        <td class="text-center no-border-top"><span class="dot"></span></td>
        <td class="text-center no-border-top"><span class="dot"></span></td>
        <td class="text-center no-border-top"><span class="dot"></span></td>
        <td class="text-center no-border-top"><span class="dot"></span></td>
        <td class="text-center no-border-top"><span class="dot"></span></td>
        <td class="text-center no-border-top"><span class="dot"></span></td>
        <td class="text-center no-border-top"><span class="dot"></span></td>
        <td class="text-center no-border-top"><span class="dot"></span></td>
        <td class="text-center no-border-top"><span class="dot"></span></td>
        <td class="text-center no-border-top"><span class="dot"></span></td>
        <td class="text-center no-border-top"><span class="dot"></span></td>
        <td class="text-center no-border-top"><span class="dot"></span></td>
      </tr>
    </ng-template>

    <ng-template pTemplate="emptymessage">
      <tr>
        <td colspan="14" class="text-center">{{ noDataMessage }}</td>
      </tr>
    </ng-template>
  </p-table>
</div>
