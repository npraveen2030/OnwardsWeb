<div class="d-flex justify-content-between align-items-center mb-3">
  <button class="btn btn-outline-primary" (click)="previousMonth()">
    &larr; Previous
  </button>

  <h3>{{ viewDate | calendarDate : "monthViewTitle" : "en" }}</h3>

  <button class="btn btn-outline-primary" (click)="nextMonth()">
    Next &rarr;
  </button>
</div>

<!-- ✅ Custom cell template with full cell right-click -->
<ng-template #customCellTemplate let-day="day">
  <div
    class="custom-day-cell"
    (contextmenu)="onRightClick($event, day)"
    [ngClass]="{ 'outside-month': !day.inMonth }"
  >
    <div class="cal-cell-top">
      {{ day.date | date : "d" }}
    </div>
    <div class="event-dot-container">
      <span
        *ngFor="let event of day.events"
        class="event-dot"
        [ngStyle]="{ 'background-color': event.color?.primary }"
      ></span>
    </div>
  </div>
</ng-template>

<!-- ✅ Month view using custom cell template -->
<mwl-calendar-month-view
  [viewDate]="viewDate"
  [events]="events"
  [refresh]="refresh"
  [cellTemplate]="customCellTemplate"
  (eventClicked)="handleEvent($event.event)"
>
</mwl-calendar-month-view>

<!-- ✅ Custom context menu -->
<div
  class="custom-context-menu"
  *ngIf="showContextMenu"
  [ngStyle]="{ top: menuY + 'px', left: menuX + 'px' }"
  (click)="$event.stopPropagation()"
>
  <strong>{{ rightClickDay | date : "fullDate" }}</strong>
  <ul>
    <li (click)="handleAction('Info')">Info for this day</li>
    <li (click)="handleAction('Edit')">Edit something</li>
  </ul>
</div>
